<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.e1832a5927f09fdd66c0.css">body,html{height:100%;margin:0;padding:0}a{text-decoration:none;color:#000}img{width:100%}div.notion-selectable{max-width:none!important}</style><meta name="generator" content="Gatsby 2.20.12"/><link rel="icon" href="/icons/icon-48x48.png?v=c0044961b87803a488f9e0b7d3c26d18"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=c0044961b87803a488f9e0b7d3c26d18"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=c0044961b87803a488f9e0b7d3c26d18"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=c0044961b87803a488f9e0b7d3c26d18"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=c0044961b87803a488f9e0b7d3c26d18"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=c0044961b87803a488f9e0b7d3c26d18"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=c0044961b87803a488f9e0b7d3c26d18"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=c0044961b87803a488f9e0b7d3c26d18"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=c0044961b87803a488f9e0b7d3c26d18"/><title data-react-helmet="true">chub_sum | 9ser&#x27;s Notion</title><meta data-react-helmet="true" name="description" content="build with gatsby &amp; notion"/><meta data-react-helmet="true" property="og:title" content="chub_sum"/><meta data-react-helmet="true" property="og:description" content="build with gatsby &amp; notion"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@9ser"/><meta data-react-helmet="true" name="twitter:title" content="chub_sum"/><meta data-react-helmet="true" name="twitter:description" content="build with gatsby &amp; notion"/><link as="script" rel="preload" href="/styles-55b12e3f12e70f5e0cab.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-95acc0d9e26ef5287f4f.js"/><link as="script" rel="preload" href="/commons-6192a1a0e7c8478a4016.js"/><link as="script" rel="preload" href="/app-b4d1165314f295275c9e.js"/><link as="script" rel="preload" href="/framework-d4b23c820857b16d359a.js"/><link as="script" rel="preload" href="/webpack-runtime-623575401b86fc9cccab.js"/><link as="fetch" rel="preload" href="/page-data/posts/30cf41c916ec4730a7a300f4d5893905/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="padding-top:45px"><style data-emotion-css="1thsmuw">.css-1thsmuw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:45px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:fixed;width:100%;top:0;border-bottom:1px solid #f7f7f7;background:#fefefe;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="css-1thsmuw"><a href="/"><style data-emotion-css="knuik">.css-knuik{padding:36px;color:#000;-webkit-text-decoration:none;text-decoration:none;}</style><span class="css-knuik">9ser&#x27;s Notion<!-- --> / </span></a><a href="/posts/b3e50deaeb7d4734bf84e15bbf2787c3"><span class="css-knuik">About</span></a></div><style data-emotion-css="1cde1yu">.css-1cde1yu{padding-bottom:40px;padding-left:calc((100% - 1000px) / 2);padding-right:calc((100% - 1000px) / 2);overflow:hidden;}</style><div class="css-1cde1yu"><div style="padding:0 20px"><style data-emotion-css="78kh3p">.css-78kh3p{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transition:background 120ms ease-in 0s;transition:background 120ms ease-in 0s;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:78px;width:78px;border-radius:3px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-top:115px;margin-left:3px;margin-bottom:19px;-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;position:relative;z-index:1;}</style><div class="css-78kh3p"><svg t="1583650257407" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3182" width="280" height="280"><path d="M43.072 974.72l380.864-301.952 151.936 161.6c0 0 63.424 17.28 67.328-30.72l-3.904-163.584 225.088-259.648 98.048-5.696c0 0 76.928-15.488 21.184-82.752l-275.072-276.928c0 0-74.944-9.6-69.248 59.584l0 75.008L383.552 367.104 225.856 376.64c0 0-57.728 19.2-36.608 69.248l148.16 146.176L43.072 974.72 43.072 974.72z" p-id="3183" fill="#FB7299"></path></svg></div><h1 style="margin-bottom:25px;font-size:2.5em">chub_sum</h1><div style="margin:0px;padding:4px 0 8px 0;font-size:14px"><style data-emotion-css="1b9ve4d">.css-1b9ve4d{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-bottom:6px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-1b9ve4d"><style data-emotion-css="12a582j">.css-12a582j{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:34px;width:160px;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;color:rgba(55,53,47,0.6);}</style><div class="css-12a582j">Created</div><style data-emotion-css="yrce6o">.css-yrce6o{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:4px;height:100%;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0px;color:rgba(55,53,47,0.6);}</style><div class="css-yrce6o">2019-07-07</div></div><div class="css-1b9ve4d"><div class="css-12a582j">Last Edited</div><div class="css-yrce6o">2020-04-05</div></div><div class="css-1b9ve4d"><div class="css-12a582j">Category</div><div class="css-yrce6o">开发</div></div><div class="css-1b9ve4d"><div class="css-12a582j">Tag</div><div class="css-yrce6o">小程序</div></div></div><style data-emotion-css="1i28j2w">.css-1i28j2w{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;border-top:1px solid rgba(55,53,47,0.09);border-bottom:1px solid rgba(55,53,47,0.09);padding:12px 4px 16px;margin-bottom:30px;color:rgba(55,53,47,0.6);}</style><div class="css-1i28j2w">此处待设定</div><div class="markdown-body"><div><div data-block-id="4ea77747-cecf-4dd5-9b42-2318c36bb52f" class="notion-selectable notion-image-block" style="width: 100%; max-width: 800px; align-self: center; margin-top: 2px; margin-bottom: 0.5em;"><div><div style="display: flex;"><div class="notion-cursor-default" style="position: relative; overflow: hidden; flex-grow: 1;"><div style="position: relative;"><div style="width: 100%; height: 100%;"><img src="https://www.notion.so/image/https%3A%2F%2Fraw.githubusercontent.com%2Folaijunjie%2FcloudPic%2Fmaster%2Facg%2F7640889_52993606.png?table=block&amp;id=4ea77747-cecf-4dd5-9b42-2318c36bb52f&amp;cache=v2" style="display: block; object-fit: cover; border-radius: 1px; width: 100%; pointer-events: auto;"></div></div></div></div><div contenteditable="false" spellcheck="true" placeholder="Write a caption..." data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); font-size: 14px; line-height: 1.4; color: rgba(55, 53, 47, 0.6); padding-top: 6px; padding-bottom: 6px; padding-left: 2px;"><a href="https://www.pixiv.net/member_illust.php?mode=medium&amp;illust_id=52993606" style="text-decoration:underline;color:inherit;cursor:pointer;word-wrap:break-word" target="_blank" rel="noopener noreferrer" data-token-index="0">あさひ＠クロイ</a> by <a href="https://www.pixiv.net/member.php?id=7640889" style="text-decoration:underline;color:inherit;cursor:pointer;word-wrap:break-word" target="_blank" rel="noopener noreferrer" data-token-index="2">秋の回忆亚</a> on <a href="https://www.pixiv.net/" style="text-decoration:underline;color:inherit;cursor:pointer;word-wrap:break-word" target="_blank" rel="noopener noreferrer" data-token-index="4">pixiv</a></div></div></div><div data-block-id="38b64093-5cf5-4961-ab45-978c03751de5" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);"></div></div></div></div><div data-block-id="5a3f5c7f-be3c-4a2b-8636-ebde7ef1a9bb" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">记录一些在小程序项目上遇到的问题及其解决方法</div></div></div></div><div data-block-id="37a155d7-a465-4820-8b57-68fd0b47d932" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);"></div></div></div></div><div data-block-id="62d2f4ba-dedf-4ee1-8d10-58e5356f2883" class="notion-selectable notion-sub_header-block" style="width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);"><div style="display: flex; width: 100%; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;"><div contenteditable="false" spellcheck="true" placeholder="Heading 2" data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">小程序中使用 npm 包</div></div></div><div data-block-id="2243709e-91c0-4a8b-890c-68e5edb7f950" class="notion-selectable notion-divider-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div class="notion-cursor-default" style="display: flex; align-items: center; justify-content: center; pointer-events: auto; width: 100%; height: 13px; flex: 0 0 auto; color: rgb(228, 227, 226);"><div style="width: 100%; height: 1px; visibility: visible; border-bottom: 1px solid rgba(55, 53, 47, 0.09);"></div></div></div><div data-block-id="8cb648bb-9354-42f7-ae18-02fb1be3f0a4" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);"></div></div></div></div><div data-block-id="aeb643d9-8b15-4d81-8f22-c9bc349657a3" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">直接在文件中引用包</div></div></div></div><div data-block-id="80b315fb-83cc-4e05-937c-6562b637ecf8" class="notion-selectable notion-code-block" style="width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;"><div style="display: flex;"><div style="flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;"><div class="line-numbers notion-code-block" style="display: flex; overflow-x: auto;"><div contenteditable="false" spellcheck="false" autocorrect="off" autocapitalize="off" data-root="true" style="flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;"><span class="token keyword" data-token-index="0">import</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0"> Base64 </span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0"> </span><span class="token keyword" data-token-index="0">from</span><span data-token-index="0"> </span><span class="token string" data-token-index="0">'../../base64/base64.js'</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
</span><span class="token keyword" data-token-index="0">let</span><span data-token-index="0"> decodeData </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> Base64</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">decode</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">base64RM</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span>
</span></div></div><div style="position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;"></div><div style="position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;"><div role="button" aria-disabled="true" tabindex="-1" style="user-select: none; transition: background 120ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;">JavaScript<svg viewBox="0 0 30 30" class="chevronDown" style="width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;"><polygon points="15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 "></polygon></svg></div></div></div></div></div><div data-block-id="99702b84-22f7-4693-969d-e5c1b72520d1" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);"></div></div></div></div><div data-block-id="00cbe2a5-10cb-4466-9fce-9a9d87a25b6f" class="notion-selectable notion-sub_header-block" style="width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);"><div style="display: flex; width: 100%; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;"><div contenteditable="false" spellcheck="true" placeholder="Heading 2" data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">markdown 转为 wxml</div></div></div><div data-block-id="1a760584-c61e-4481-b692-d01366cb9501" class="notion-selectable notion-divider-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div class="notion-cursor-default" style="display: flex; align-items: center; justify-content: center; pointer-events: auto; width: 100%; height: 13px; flex: 0 0 auto; color: rgb(228, 227, 226);"><div style="width: 100%; height: 1px; visibility: visible; border-bottom: 1px solid rgba(55, 53, 47, 0.09);"></div></div></div><div data-block-id="15ef1b01-e819-4ee5-a2a8-ab5688159e8e" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">使用 <a href="https://github.com/sbfkcel/towxml" style="text-decoration:underline;color:inherit;cursor:pointer;word-wrap:break-word" target="_blank" rel="noopener noreferrer" data-token-index="1">towxml</a> 渲染库</div></div></div></div><div data-block-id="c7a44de9-d7c4-494e-b292-73e7f768443c" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);"></div></div></div></div><div data-block-id="306a84db-ea87-47d8-b04d-714e26bf21b4" class="notion-selectable notion-sub_header-block" style="width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);"><div style="display: flex; width: 100%; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;"><div contenteditable="false" spellcheck="true" placeholder="Heading 2" data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">未备案域名 API 的转发</div></div></div><div data-block-id="ba2d2279-7740-48dc-9285-7203ea178eb4" class="notion-selectable notion-divider-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div class="notion-cursor-default" style="display: flex; align-items: center; justify-content: center; pointer-events: auto; width: 100%; height: 13px; flex: 0 0 auto; color: rgb(228, 227, 226);"><div style="width: 100%; height: 1px; visibility: visible; border-bottom: 1px solid rgba(55, 53, 47, 0.09);"></div></div></div><div data-block-id="cfee64d9-6330-41c6-a478-ab7bd1f34794" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);"></div></div></div></div><div data-block-id="5908fba3-6445-4d64-bc25-1fac19610ad0" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">有两种解决方案：一种使用服务器代理；另一种使用小程序的云函数。</div></div></div></div><div data-block-id="3e38636b-fcf6-4b62-bcec-e34269c89467" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);"></div></div></div></div><div data-block-id="b08fc45a-f2f5-4d75-bb70-246d12eef674" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;"><span style="font-weight:600" data-token-index="0">1. 使用 node.js 实现代理服务</span></div></div></div></div><div data-block-id="5bce21e4-e300-4a89-a562-20715881c931" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">服务端</div></div></div></div><div data-block-id="a7055686-0b5a-498f-8530-69a1a60d9dae" class="notion-selectable notion-code-block" style="width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;"><div style="display: flex;"><div style="flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;"><div class="line-numbers notion-code-block" style="display: flex; overflow-x: auto;"><div contenteditable="false" spellcheck="false" autocorrect="off" autocapitalize="off" data-root="true" style="flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;"><span class="token keyword" data-token-index="0">const</span><span data-token-index="0"> express </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> </span><span class="token function" data-token-index="0">require</span><span class="token punctuation" data-token-index="0">(</span><span class="token string" data-token-index="0">'express'</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
</span><span class="token keyword" data-token-index="0">const</span><span data-token-index="0"> request </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> </span><span class="token function" data-token-index="0">require</span><span class="token punctuation" data-token-index="0">(</span><span class="token string" data-token-index="0">'request'</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
</span><span class="token keyword" data-token-index="0">const</span><span data-token-index="0"> app </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> </span><span class="token function" data-token-index="0">express</span><span class="token punctuation" data-token-index="0">(</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
</span><span class="token comment" data-token-index="0">// get json</span><span data-token-index="0">
</span><span class="token comment" data-token-index="0">// http://chub.applinzi.com/json?url=https://api.github.com/users/K-line</span><span data-token-index="0">
app</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">get</span><span class="token punctuation" data-token-index="0">(</span><span class="token string" data-token-index="0">'/json'</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">(</span><span class="token parameter" data-token-index="0">req</span><span class="token punctuation" data-token-index="0">,</span><span class="token parameter" data-token-index="0"> res</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token operator" data-token-index="0">=&gt;</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
	</span><span class="token keyword" data-token-index="0">let</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0"> url </span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0"> </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> req</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">query</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
	</span><span class="token keyword" data-token-index="0">var</span><span data-token-index="0"> options </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">url</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> url</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0">headers</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span class="token string" data-token-index="0">'User-Agent'</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token string" data-token-index="0">'request'</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
	</span><span class="token keyword" data-token-index="0">function</span><span data-token-index="0"> </span><span class="token function" data-token-index="0">callback</span><span class="token punctuation" data-token-index="0">(</span><span class="token parameter" data-token-index="0">error</span><span class="token punctuation" data-token-index="0">,</span><span class="token parameter" data-token-index="0"> response</span><span class="token punctuation" data-token-index="0">,</span><span class="token parameter" data-token-index="0"> body</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
		</span><span class="token keyword" data-token-index="0">if</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">(</span><span class="token operator" data-token-index="0">!</span><span data-token-index="0">error </span><span class="token operator" data-token-index="0">&amp;&amp;</span><span data-token-index="0"> response</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">statusCode </span><span class="token operator" data-token-index="0">==</span><span data-token-index="0"> </span><span class="token number" data-token-index="0">200</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
			</span><span class="token keyword" data-token-index="0">let</span><span data-token-index="0"> data </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> </span><span class="token constant" data-token-index="0">JSON</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">parse</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">body</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
			res</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">json</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">data</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
		</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0">
	</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0">
	</span><span class="token function" data-token-index="0">request</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">options</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0"> callback</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">

</span><span class="token comment" data-token-index="0">// get image</span><span data-token-index="0">
app</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">get</span><span class="token punctuation" data-token-index="0">(</span><span class="token string" data-token-index="0">'/avatar'</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">(</span><span class="token parameter" data-token-index="0">req</span><span class="token punctuation" data-token-index="0">,</span><span class="token parameter" data-token-index="0"> res</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token operator" data-token-index="0">=&gt;</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
	</span><span class="token keyword" data-token-index="0">let</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0"> url </span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0"> </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> req</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">query</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
	console</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">log</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">url</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
	</span><span class="token keyword" data-token-index="0">var</span><span data-token-index="0"> options </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">url</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> url</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0">encoding</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token keyword" data-token-index="0">null</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0">headers</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span class="token string" data-token-index="0">'User-Agent'</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token string" data-token-index="0">'request'</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
	</span><span class="token keyword" data-token-index="0">function</span><span data-token-index="0"> </span><span class="token function" data-token-index="0">callback</span><span class="token punctuation" data-token-index="0">(</span><span class="token parameter" data-token-index="0">error</span><span class="token punctuation" data-token-index="0">,</span><span class="token parameter" data-token-index="0"> response</span><span class="token punctuation" data-token-index="0">,</span><span class="token parameter" data-token-index="0"> body</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
		</span><span class="token keyword" data-token-index="0">if</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">(</span><span class="token operator" data-token-index="0">!</span><span data-token-index="0">error </span><span class="token operator" data-token-index="0">&amp;&amp;</span><span data-token-index="0"> response</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">statusCode </span><span class="token operator" data-token-index="0">==</span><span data-token-index="0"> </span><span class="token number" data-token-index="0">200</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
			res</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">set</span><span class="token punctuation" data-token-index="0">(</span><span class="token string" data-token-index="0">'Content-Type'</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0"> </span><span class="token string" data-token-index="0">'image/png;'</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
			res</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">send</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">body</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
		</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0">
	</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0">
	</span><span class="token function" data-token-index="0">request</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">options</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0"> callback</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
app</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">listen</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">process</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">env</span><span class="token punctuation" data-token-index="0">.</span><span class="token constant" data-token-index="0">PORT</span><span data-token-index="0"> </span><span class="token operator" data-token-index="0">||</span><span data-token-index="0"> </span><span class="token number" data-token-index="0">5050</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span>
</span></div></div><div style="position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;"></div><div style="position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;"><div role="button" aria-disabled="true" tabindex="-1" style="user-select: none; transition: background 120ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;">JavaScript<svg viewBox="0 0 30 30" class="chevronDown" style="width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;"><polygon points="15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 "></polygon></svg></div></div></div></div></div><div data-block-id="0b0efa34-3cd2-4358-9f3f-2117461b0b30" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">小程序端</div></div></div></div><div data-block-id="c7d60162-8cdc-4a9c-b999-27f30a3ee66b" class="notion-selectable notion-code-block" style="width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;"><div style="display: flex;"><div style="flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;"><div class="line-numbers notion-code-block" style="display: flex; overflow-x: auto;"><div contenteditable="false" spellcheck="false" autocorrect="off" autocapitalize="off" data-root="true" style="flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;">let url = `https://github-trending-api.now.sh/repositories?language=${lan}&amp;since=${type}`;wx.request({url: baseUrl,data: { url },success: function(res) {_ts.setData({trendArr: res.data});trendCollect[repoKey] = res.data;wx.hideLoading();},fail: function(err) {wx.hideLoading();return;}});<span>
</span></div></div><div style="position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;"></div><div style="position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;"><div role="button" aria-disabled="true" tabindex="-1" style="user-select: none; transition: background 120ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;">Plain Text<svg viewBox="0 0 30 30" class="chevronDown" style="width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;"><polygon points="15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 "></polygon></svg></div></div></div></div></div><div data-block-id="92b54c29-fcc2-4ecd-ba0f-821616dc3e58" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);"></div></div></div></div><div data-block-id="d4df287d-11ec-4e2a-8ab4-29de3ea121e1" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;"><span style="font-weight:600" data-token-index="0">2. 使用小程序的云函数</span></div></div></div></div><div data-block-id="bef9472b-94dc-45f7-a709-3c3f98640f68" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);"></div></div></div></div><div data-block-id="b25efdb5-f2e0-47cb-8cf0-433cec4bd552" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">服务端</div></div></div></div><div data-block-id="07a65e00-04dd-4a0c-992e-ce02ec2649e3" class="notion-selectable notion-code-block" style="width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;"><div style="display: flex;"><div style="flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;"><div class="line-numbers notion-code-block" style="display: flex; overflow-x: auto;"><div contenteditable="false" spellcheck="false" autocorrect="off" autocapitalize="off" data-root="true" style="flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;"><span class="token keyword" data-token-index="0">const</span><span data-token-index="0"> cloud </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> </span><span class="token function" data-token-index="0">require</span><span class="token punctuation" data-token-index="0">(</span><span class="token string" data-token-index="0">'wx-server-sdk'</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
</span><span class="token keyword" data-token-index="0">const</span><span data-token-index="0"> got </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> </span><span class="token function" data-token-index="0">require</span><span class="token punctuation" data-token-index="0">(</span><span class="token string" data-token-index="0">'got'</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
cloud</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">init</span><span class="token punctuation" data-token-index="0">(</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
exports</span><span class="token punctuation" data-token-index="0">.</span><span class="token function-variable function" data-token-index="0">main</span><span data-token-index="0"> </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> </span><span class="token keyword" data-token-index="0">async</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">(</span><span class="token parameter" data-token-index="0">event</span><span class="token punctuation" data-token-index="0">,</span><span class="token parameter" data-token-index="0"> context</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token operator" data-token-index="0">=&gt;</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
	</span><span class="token keyword" data-token-index="0">const</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0"> url</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0"> isImg</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0"> isMd</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0"> isJson </span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0"> </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> event</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0"> 
	
	</span><span class="token comment" data-token-index="0">// （"JSON"）</span><span data-token-index="0">
	</span><span class="token keyword" data-token-index="0">if</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">isJson</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
		</span><span class="token keyword" data-token-index="0">try</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
			</span><span class="token keyword" data-token-index="0">const</span><span data-token-index="0"> response </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> </span><span class="token keyword" data-token-index="0">await</span><span data-token-index="0"> </span><span class="token function" data-token-index="0">got</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">url</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
			</span><span class="token comment" data-token-index="0">//console.log(response.body);</span><span data-token-index="0">
			</span><span class="token keyword" data-token-index="0">return</span><span data-token-index="0"> </span><span class="token constant" data-token-index="0">JSON</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">parse</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">response</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">body</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
		</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0"> </span><span class="token keyword" data-token-index="0">catch</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">error</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
			console</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">log</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">error</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
		</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0">
	</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0">

	</span><span class="token comment" data-token-index="0">// ("image")</span><span data-token-index="0">
	</span><span class="token keyword" data-token-index="0">if</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">isImg</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
		</span><span class="token keyword" data-token-index="0">try</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
			</span><span class="token keyword" data-token-index="0">const</span><span data-token-index="0"> response </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> </span><span class="token keyword" data-token-index="0">await</span><span data-token-index="0"> </span><span class="token function" data-token-index="0">got</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">url</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
				headers</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span class="token string" data-token-index="0">'Content-Type'</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token string" data-token-index="0">'image/png;'</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0">encoding</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token keyword" data-token-index="0">null</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0">
			</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
			</span><span class="token comment" data-token-index="0">// console.log(response.body);</span><span data-token-index="0">
			</span><span class="token keyword" data-token-index="0">return</span><span data-token-index="0"> response</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">body</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
		</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0"> </span><span class="token keyword" data-token-index="0">catch</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">error</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
			console</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">log</span><span class="token punctuation" data-token-index="0">(</span><span data-token-index="0">error</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
		</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0">
	</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0">
</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">;</span><span>
</span></div></div><div style="position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;"></div><div style="position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;"><div role="button" aria-disabled="true" tabindex="-1" style="user-select: none; transition: background 120ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;">JavaScript<svg viewBox="0 0 30 30" class="chevronDown" style="width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;"><polygon points="15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 "></polygon></svg></div></div></div></div></div><div data-block-id="aaf80e6f-c2c4-4267-84ba-9ccb73166a5a" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);"></div></div></div></div><div data-block-id="9f3448da-7f81-462a-8c65-d2ca1a25bcfb" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">小程序端</div></div></div></div><div data-block-id="54ab296c-086f-443a-b0e9-cd1cb93bf685" class="notion-selectable notion-code-block" style="width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;"><div style="display: flex;"><div style="flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;"><div class="line-numbers notion-code-block" style="display: flex; overflow-x: auto;"><div contenteditable="false" spellcheck="false" autocorrect="off" autocapitalize="off" data-root="true" style="flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;"><span class="token comment" data-token-index="0">// console.log('trend.js 调用云函数');</span><span data-token-index="0">
wx</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">cloud</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">callFunction</span><span class="token punctuation" data-token-index="0">(</span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
	</span><span class="token comment" data-token-index="0">// 要调用的云函数名称</span><span data-token-index="0">
	name</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token string" data-token-index="0">'getdata'</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0">
	</span><span class="token comment" data-token-index="0">// 传递给云函数的参数</span><span data-token-index="0">
	data</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">url</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> url</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0">isJson</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token boolean" data-token-index="0">true</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0">
	</span><span class="token function-variable function" data-token-index="0">success</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token parameter" data-token-index="0">res</span><span data-token-index="0"> </span><span class="token operator" data-token-index="0">=&gt;</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
		_ts</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">setData</span><span class="token punctuation" data-token-index="0">(</span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">trendArr</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> res</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">result</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
		trendCollect</span><span class="token punctuation" data-token-index="0">[</span><span data-token-index="0">repoKey</span><span class="token punctuation" data-token-index="0">]</span><span data-token-index="0"> </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> res</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">result</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
		wx</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">hideLoading</span><span class="token punctuation" data-token-index="0">(</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
	</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0">
	</span><span class="token function-variable function" data-token-index="0">fail</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token parameter" data-token-index="0">err</span><span data-token-index="0"> </span><span class="token operator" data-token-index="0">=&gt;</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
		wx</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">hideLoading</span><span class="token punctuation" data-token-index="0">(</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
		</span><span class="token keyword" data-token-index="0">return</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
	</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0">
</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span>
</span></div></div><div style="position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;"></div><div style="position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;"><div role="button" aria-disabled="true" tabindex="-1" style="user-select: none; transition: background 120ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;">JavaScript<svg viewBox="0 0 30 30" class="chevronDown" style="width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;"><polygon points="15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 "></polygon></svg></div></div></div></div></div><div data-block-id="50f9c7cc-04e4-41be-8374-dd3ab6817d6d" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);"></div></div></div></div><div data-block-id="617a679d-3f50-41b7-978c-b03d238d0faf" class="notion-selectable notion-sub_header-block" style="width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);"><div style="display: flex; width: 100%; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;"><div contenteditable="false" spellcheck="true" placeholder="Heading 2" data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">执行云函数出现 Error: errCode: -404011</div></div></div><div data-block-id="4e5173b4-4e3d-4961-98d9-26bc1ff59810" class="notion-selectable notion-divider-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div class="notion-cursor-default" style="display: flex; align-items: center; justify-content: center; pointer-events: auto; width: 100%; height: 13px; flex: 0 0 auto; color: rgb(228, 227, 226);"><div style="width: 100%; height: 1px; visibility: visible; border-bottom: 1px solid rgba(55, 53, 47, 0.09);"></div></div></div><div data-block-id="6614851f-e6ad-4162-87a5-a5106c662571" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">问题原因为找不到要执行的云函数。</div></div></div></div><div data-block-id="afc140d7-4594-4c58-b1ca-48eb5dea2d92" class="notion-selectable notion-text-block" style="width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;"><div style="color: inherit; fill: inherit;"><div style="display: flex;"><div contenteditable="false" spellcheck="true" placeholder=" " data-root="true" style="max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;">分为两种：未上传并部署云函数 以及 未在 app.js 中初始化云环境</div></div></div></div><div data-block-id="b07ec2b9-a8d0-4917-b6ad-25a7691dd053" class="notion-selectable notion-code-block" style="width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 0px;"><div style="display: flex;"><div style="flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;"><div class="line-numbers notion-code-block" style="display: flex; overflow-x: auto;"><div contenteditable="false" spellcheck="false" autocorrect="off" autocapitalize="off" data-root="true" style="flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;"><span class="token comment" data-token-index="0">//app.js 中初始化</span><span data-token-index="0">
</span><span class="token function" data-token-index="0">App</span><span class="token punctuation" data-token-index="0">(</span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
	</span><span class="token function-variable function" data-token-index="0">onLaunch</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token keyword" data-token-index="0">function</span><span class="token punctuation" data-token-index="0">(</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
		</span><span class="token keyword" data-token-index="0">if</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">(</span><span class="token operator" data-token-index="0">!</span><span data-token-index="0">wx</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">cloud</span><span class="token punctuation" data-token-index="0">)</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
			console</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">error</span><span class="token punctuation" data-token-index="0">(</span><span class="token string" data-token-index="0">'请使用 2.2.3 或以上的基础库以使用云能力'</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
		</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0"> </span><span class="token keyword" data-token-index="0">else</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
			</span><span class="token comment" data-token-index="0">// 使用 环境id 初始化</span><span data-token-index="0">
			wx</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">cloud</span><span class="token punctuation" data-token-index="0">.</span><span class="token function" data-token-index="0">init</span><span class="token punctuation" data-token-index="0">(</span><span class="token punctuation" data-token-index="0">{</span><span data-token-index="0">
				env</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token string" data-token-index="0">'release-mgz65'</span><span class="token punctuation" data-token-index="0">,</span><span data-token-index="0">
				traceUser</span><span class="token punctuation" data-token-index="0">:</span><span data-token-index="0"> </span><span class="token boolean" data-token-index="0">true</span><span data-token-index="0">
			</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
		</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0">
		</span><span class="token keyword" data-token-index="0">this</span><span class="token punctuation" data-token-index="0">.</span><span data-token-index="0">globalData </span><span class="token operator" data-token-index="0">=</span><span data-token-index="0"> </span><span class="token punctuation" data-token-index="0">{</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">;</span><span data-token-index="0">
	</span><span class="token punctuation" data-token-index="0">}</span><span data-token-index="0">
</span><span class="token punctuation" data-token-index="0">}</span><span class="token punctuation" data-token-index="0">)</span><span class="token punctuation" data-token-index="0">;</span><span>
</span></div></div><div style="position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;"></div><div style="position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;"><div role="button" aria-disabled="true" tabindex="-1" style="user-select: none; transition: background 120ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;">JavaScript<svg viewBox="0 0 30 30" class="chevronDown" style="width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;"><polygon points="15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 "></polygon></svg></div></div></div></div></div></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/30cf41c916ec4730a7a300f4d5893905";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-b4d1165314f295275c9e.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-95acc0d9e26ef5287f4f.js"],"component---src-templates-blog-tag-js":["/component---src-templates-blog-tag-js-e1f8b197af88d7522215.js"],"component---src-pages-404-js":["/component---src-pages-404-js-c0d9e2228d0d6bb9aff2.js"],"component---src-pages-index-js":["/component---src-pages-index-js-ed6f00a2c00ed41defaf.js"]};/*]]>*/</script><script src="/webpack-runtime-623575401b86fc9cccab.js" async=""></script><script src="/framework-d4b23c820857b16d359a.js" async=""></script><script src="/app-b4d1165314f295275c9e.js" async=""></script><script src="/commons-6192a1a0e7c8478a4016.js" async=""></script><script src="/component---src-templates-blog-post-js-95acc0d9e26ef5287f4f.js" async=""></script><script src="/styles-55b12e3f12e70f5e0cab.js" async=""></script></body></html>